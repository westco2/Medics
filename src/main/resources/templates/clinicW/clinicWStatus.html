<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>

	<th:block
		th:replace="~{./include/baselayout :: setContent( ~{ :: .div-w})}">
		<div class="div-w">
			<h3 style="padding-right: 71px;">신청학생정보</h3>
			<div class="search-wrap-w">
				<div class="info-search-w">
					<input type="text" id="input-w" placeholder="이름 입력">
					<button type="button" class="Btn-w" id="Btn-w">검색</button>
				</div>
			</div>
			<div class="table-wrap-w">
				<table class="head-line-w" cellpadding="0" cellspacing="0">
					<thead>
						<tr>
							<th>이름</th>
							<th>학번</th>
							<th>학과</th>
							<th>이메일</th>
							<th>연락처</th>
							<th>성별</th>
							<th>생년월일</th>
							<th>학년</th>
							<th>상태구분</th>
						</tr>
					</thead>
				</table>
				<div class="table-content-w" style="height: 300px;">
					<table cellpadding="0" cellspacing="0">
						<tbody class="body-line-w">
							<tr th:each="vo : ${status}">
								<td>[[${vo.status.count}]]</td>
								<td>[[${vo.studentid}]]</td>
								<td>[[${vo.scsbjt_nm}]]</td>
								<td>[[${vo.mbr_eml_addr}]]</td>
								<td>[[${vo.idfr_telno}]]</td>
								<td>[[${vo.gndr_nm}]]</td> <!-- 표출값에따라 삼항연삭식으로 표기 -->
								<td>[[${vo.user_brdt}]]</td>
								<td>[[${vo.grade}]]</td>
								<td>[[${vo.enrollment}]]</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="table-wrap-w">
					<h3 style="padding-right: 71px;">신청학생목록</h3>
					<table class="head-line-w" cellpadding="0" cellspacing="0">
						<tr>
							<th>번호</th>
							<th>이름</th>
							<th>분류</th>
							<th>제목</th>
							<th>날짜</th>
							<th>학번</th>
							<th>상태</th>
						</tr>
					</table>
				</div>
				<div class="table-content-w" style="height: 400px;">
					<table cellpadding="0" cellspacing="0">
						<tbody class="body-line-w">
							<tr th:each="vo, status : ${status}">
								<td>[[${status.count}]]</td>
								<td>[[${vo.korn_flnm}]]</td>
								<td>[[${vo.cli_clsf_nm}]]</td>
								<td>[[${vo.cli_ntc_cn}]]</td>
								<td>[[${vo.cli_ntc_ymd}]]</td>
								<td>[[${vo.studentid}]]</td>
								<td>
									<button type="button" class="Btn-w" id="deleteBtn=w">취소</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
	</th:block>
	
	<script>
	
	//검색버튼(제목)
	var searchBtn = document.getElementById('Btn-w');

	// 검색 버튼 클릭 시 실행될 함수를 연결합니다.
	searchBtn.addEventListener('click', function() {
		// 검색어를 가져옵니다.
		var searchInput = document.querySelector('#input-w').value
				.toLowerCase(); // 검색어 입력란의 값

		// 모든 테이블 행을 가져옵니다.
		var rows = document.querySelectorAll('.body-line-w tr');

		// 각 행을 순회하며 검색어와 일치하는 것만 보여줍니다.
		rows.forEach(function(row) {
			// 각 행의 제목 셀을 가져옵니다.
			var titleCell = row.querySelector('td:nth-child(1)'); // 검색 대상 필드의 위치
			var titleText = titleCell.textContent.toLowerCase(); // 제목 텍스트를 소문자로 변환합니다.

			// 검색어가 포함되어 있으면 해당 행을 표시합니다.
			if (titleText.includes(searchInput)) {
				row.style.display = ''; // 보이도록 설정합니다.
			} else {
				row.style.display = 'none'; // 숨깁니다.
			}
		});
	});

	/////
	
	var deleteBtn = document.getElemtentById("deleteBtn-w")
	deleteBtn.onclick = function(){
		event.proventDefault();
		if(confirm("삭제 후에는 데이터 복구가 불가합니다.") == false){
			
		}
		
		document.actionForm.action = "deleteForm";
		document.actionForm.submit();
	}
	
	
	</script>
	
</body>
</html>
